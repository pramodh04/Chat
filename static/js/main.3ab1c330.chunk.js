(this["webpackJsonpfirebase-chatapp"]=this["webpackJsonpfirebase-chatapp"]||[]).push([[0],{32:function(e,t,n){},33:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(22),s=n.n(a),i=(n(32),n(3)),o=n(27),l=n(4),u=n(2),j=n(9),d=(n(33),n(5)),h=n.n(d),b=n(8),x=n(13),O=n.n(x);n(38),n(40),n(56);O.a.initializeApp({apiKey:"AIzaSyBZMBo9xtIMI4fhkLh25lu1Z5IIOERqT_8",authDomain:"chatapp-94dce.firebaseapp.com",databaseURL:"https://chatapp-94dce.firebaseio.com",projectId:"chatapp-94dce",storageBucket:"chatapp-94dce.appspot.com",messagingSenderId:"24057744022",appId:"1:24057744022:web:b054fd1abe1b4efbb050b7"});var p=O.a.auth(),g=O.a.firestore(),m=O.a.storage(),f=g,v=n(23),A="data:image/png;base64,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",w=n(0),T=function(e){var t=e.user,n=e.getuser,r=e.user1,a=e.chat,s=e.setscreen,i=null===t||void 0===t?void 0:t.uid,o=Object(v.useState)(null),u=Object(l.a)(o,2),j=u[0],d=u[1],h="".concat(r>i?r+i:i+r);return Object(c.useEffect)((function(){var e=f.collection("lastmessage").doc(h).onSnapshot((function(e){d(e.data())}));return function(){return e()}})),Object(w.jsx)("div",{className:"user ".concat(a.name===t.name&&"selecteduser"),onClick:function(){return[n(t),s(!0)]},children:Object(w.jsxs)("div",{className:"user-info",children:[Object(w.jsxs)("div",{className:"user-details",children:[Object(w.jsx)("img",{src:t.avatar||A,alt:"avatar",className:"avatar"}),Object(w.jsxs)("div",{children:[Object(w.jsxs)("h4",{children:[t.name,(null===j||void 0===j?void 0:j.from)!==r&&(null===j||void 0===j?void 0:j.unread)&&Object(w.jsx)("small",{className:"unread",children:"New"})]}),j?Object(w.jsxs)("p",{className:"truncate",children:[Object(w.jsx)("strong",{children:j.from===r?"Me : ":null}),j.text]}):null]})]}),Object(w.jsx)("div",{className:"userstatus ".concat(t.isOnline?"online":"offline")})]})})},R=function(){return Object(w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",style:{width:"30px",height:"30px"},children:Object(w.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})})},N=function(e){var t=e.handlesubmit,n=e.text,c=e.settext,r=e.setimg;return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("form",{className:"message-form",onSubmit:t,children:[Object(w.jsx)("label",{htmlFor:"img",children:Object(w.jsx)(R,{})}),Object(w.jsx)("input",{type:"file",id:"img",accept:"image/*",style:{display:"none"},onChange:function(e){return r(e.target.files[0])}}),Object(w.jsx)("div",{children:Object(w.jsx)("input",{type:"text",value:n,onChange:function(e){return c(e.target.value)}})}),Object(w.jsx)("div",{children:Object(w.jsx)("button",{className:"btn",children:"send"})})]})})},k=n(24),B=n.n(k),C=function(e){var t=e.msg,n=e.user1,r=Object(c.useRef)();return Object(c.useEffect)((function(){var e;null===(e=r.current)||void 0===e||e.scrollIntoView({behaviour:"smooth"})}),[t]),Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("div",{className:"message_container ".concat(t.from===n?"own":""),ref:r,children:Object(w.jsxs)("p",{className:t.from===n?"me":"friend",children:[t.media?Object(w.jsx)("img",{src:t.media,alt:t.text}):null,t.text,Object(w.jsx)("br",{}),Object(w.jsx)("small",{children:Object(w.jsx)(B.a,{fromNow:!0,children:t.createdAt})})]})})})},E=function(){return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{width:"25px",height:"25px",margin:"10px 20px"},children:Object(w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})})},y=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(l.a)(a,2),i=s[0],o=s[1],u=Object(c.useState)(""),j=Object(l.a)(u,2),d=j[0],x=j[1],O=Object(c.useState)(""),g=Object(l.a)(O,2),v=g[0],A=g[1],R=Object(c.useState)(""),k=Object(l.a)(R,2),B=k[0],y=k[1],S=Object(c.useState)(!1),L=Object(l.a)(S,2),D=L[0],U=L[1],P=p.currentUser.uid,q=function(){var e=Object(b.a)(h.a.mark((function e(t){var n,c,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(t),n=i.uid,c="".concat(P>n?P+n:n+P),r=f.collection("messages").doc(c).collection("chat"),r.orderBy("createdAt","asc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),t.length?y(t):y("")})),e.next=8,f.collection("lastmessage").doc(c).get();case 8:if(!(a=e.sent).data()||a.data().from===t){e.next=12;break}return e.next=12,f.collection("lastmessage").doc(c).update({unread:!1});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(b.a)(h.a.mark((function e(t){var n,c,r,a,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=i.uid,c="".concat(P>n?P+n:n+P),!v){e.next=13;break}return a=m.ref("chatImages/".concat((new Date).getTime()," ").concat(v.name)),e.next=7,a.put(v);case 7:return e.sent,e.next=10,a.getDownloadURL();case 10:s=e.sent,r=s,console.log(r);case 13:return e.next=15,f.collection("messages").doc(c).collection("chat").add({text:d,from:P,to:n,createdAt:(new Date).toString(),media:r||""});case 15:return e.next=17,f.collection("lastmessage").doc(c).set({text:d,from:P,to:n,createdAt:(new Date).toString(),media:r||"",unread:!0});case 17:x("");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){var e=f.collection("users").where("uid","not-in",[p.currentUser.uid]).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),r(t)}));return function(){return e()}}),[]),Object(w.jsxs)(w.Fragment,{children:[" ",Object(w.jsxs)("div",{className:"home",children:[Object(w.jsx)("div",{className:"users ".concat(D?"display":null),children:n.map((function(e){return Object(w.jsx)(T,{user:e,getuser:q,user1:P,chat:i,setscreen:U},e.uid)}))}),Object(w.jsx)("div",{className:"msgs",children:i?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"user_message",children:[D?Object(w.jsx)("div",{onClick:function(){U(!1)},children:Object(w.jsx)(E,{})}):null,Object(w.jsx)("span",{children:Object(w.jsx)("h3",{children:i.name})})]}),Object(w.jsx)("div",{className:"messages",children:B?B.map((function(e,t){return Object(w.jsx)(C,{msg:e,user1:P},t)})):Object(w.jsx)("div",{className:"no_chat",children:" Start Conversation "})}),Object(w.jsx)(N,{handlesubmit:F,text:d,settext:x,setimg:A})]}):Object(w.jsx)("div",{className:"no_chat",children:"Select an User to start conversation"})})]})]})},S=function(e){var t=Object(c.useState)(null),n=Object(l.a)(t,2),r=n[0],a=n[1],s=Object(u.g)(),i=function(){var e=Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.collection("users").doc(p.currentUser.uid).update({isOnline:!1});case 2:return e.next=4,p.signOut();case 4:a(null),s.replace("/login");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){p.onAuthStateChanged((function(e){return a(e)}))}),[r]),Object(w.jsxs)("nav",{children:[Object(w.jsx)("h1",{children:Object(w.jsx)(j.b,{id:"logo",to:"/",children:"ChatApp"})}),r?Object(w.jsxs)("div",{children:[Object(w.jsx)(j.b,{activeClassName:"active",to:"/profile",children:"Profile"}),Object(w.jsx)(j.b,{to:"/login",children:Object(w.jsx)("button",{className:"btn",onClick:i,children:"Logout"})})]}):Object(w.jsxs)("div",{children:[Object(w.jsx)(j.b,{to:"/login",activeClassName:"active",children:"Login"}),Object(w.jsx)(j.b,{to:"/signup",activeClassName:"active",children:"signup"})]})]})},L=n(11),D=function(){var e=Object(u.g)(),t=Object(c.useState)({name:"",email:"",password:"",error:null,loading:!1}),n=Object(l.a)(t,2),r=n[0],a=n[1],s=r.name,o=r.email,j=r.password,d=r.error,x=r.loading,O=function(e){a(Object(i.a)(Object(i.a)({},r),{},Object(L.a)({},e.target.name,e.target.value)))},g=function(){var t=Object(b.a)(h.a.mark((function t(n){var c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a(Object(i.a)(Object(i.a)({},r),{},{error:null,loading:!0})),s&&o&&j||a(Object(i.a)(Object(i.a)({},r),{},{error:"All fields are required!"})),t.prev=3,t.next=6,p.createUserWithEmailAndPassword(o,j);case 6:return c=t.sent,t.next=9,f.collection("users").doc(c.user.uid).set({uid:c.user.uid,name:s,email:o,createdAt:(new Date).toLocaleDateString(),isOnline:!1});case 9:a({name:"",email:"",password:"",error:null,loading:!1}),e.replace("/"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),console.log(t.t0),a(Object(i.a)(Object(i.a)({},r),{},{error:t.t0.message}));case 17:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(w.jsxs)("section",{children:[Object(w.jsx)("h3",{children:" Create an Account"}),Object(w.jsxs)("form",{onSubmit:g,children:[Object(w.jsxs)("div",{className:"input_container",children:[Object(w.jsx)("label",{htmlFor:"name",children:"Name"}),Object(w.jsx)("input",{type:"text",name:"name",value:s,onChange:O})]}),Object(w.jsxs)("div",{className:"input_container",children:[Object(w.jsx)("label",{htmlFor:"email",children:"Email"}),Object(w.jsx)("input",{type:"email",name:"email",value:o,onChange:O})]}),Object(w.jsxs)("div",{className:"input_container",children:[Object(w.jsx)("label",{htmlFor:"password",children:"Password"}),Object(w.jsx)("input",{type:"password",name:"password",value:j,onChange:O})]}),d?Object(w.jsx)("div",{style:{textAlign:"center",color:"red"},children:d}):null,Object(w.jsx)("div",{className:"btn_container",disabled:x,children:Object(w.jsx)("button",{className:"btn",children:x?"Creating...":"Signup"})})]})]})},U=function(){var e=Object(u.g)(),t=Object(c.useState)({email:"",password:"",error:null,loading:!1}),n=Object(l.a)(t,2),r=n[0],a=n[1],s=r.email,o=r.password,j=r.error,d=r.loading,x=function(e){a(Object(i.a)(Object(i.a)({},r),{},Object(L.a)({},e.target.name,e.target.value)))},O=function(){var t=Object(b.a)(h.a.mark((function t(n){var c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a(Object(i.a)(Object(i.a)({},r),{},{error:null,loading:!0})),s&&o||a(Object(i.a)(Object(i.a)({},r),{},{error:"All fields are required!"})),t.prev=3,t.next=6,p.signInWithEmailAndPassword(s,o);case 6:return c=t.sent,t.next=9,f.collection("users").doc(c.user.uid).update({isOnline:!0});case 9:a({email:"",password:"",error:null,loading:!1}),e.replace("/"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),console.log(t.t0),a(Object(i.a)(Object(i.a)({},r),{},{error:t.t0.message}));case 17:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(w.jsxs)("section",{children:[Object(w.jsx)("h3",{children:" Login to your Account"}),Object(w.jsxs)("form",{onSubmit:O,children:[Object(w.jsxs)("div",{className:"input_container",children:[Object(w.jsx)("label",{htmlFor:"email",children:"Email"}),Object(w.jsx)("input",{type:"email",name:"email",value:s,onChange:x})]}),Object(w.jsxs)("div",{className:"input_container",children:[Object(w.jsx)("label",{htmlFor:"password",children:"Password"}),Object(w.jsx)("input",{type:"password",name:"password",value:o,onChange:x})]}),j?Object(w.jsx)("div",{style:{textAlign:"center",color:"red"},children:j}):null,Object(w.jsx)("div",{className:"btn_container",disabled:d,children:Object(w.jsx)("button",{className:"btn",children:d?"Logging In...":"Login"})})]})]})},P=function(){return Object(w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",style:{width:"25px",height:"25px",cursor:"pointer"},children:Object(w.jsx)("path",{fillRule:"evenodd",d:"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})},q=function(e){var t=e.deleteimg;return Object(w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor ",style:{height:"25px",width:"25px",pointer:"cursor",color:"orange"},onClick:t,children:Object(w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})},F=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(),s=Object(l.a)(a,2),i=s[0],o=s[1],u=function(){var e=Object(b.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.confirm("Deleting Avatar")){e.next=9;break}return t=m.ref(),n=t.child("".concat(i.avatarpath)),e.next=7,n.delete();case 7:return e.next=9,f.collection("users").doc(p.currentUser.uid).update({avatar:"",avatarpath:""});case 9:console.log(i.avatarpath),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){if(f.collection("users").onSnapshot((function(e){e.forEach((function(e){e.data().uid===p.currentUser.uid&&o(e.data())}))})),n){var e=function(){var e=Object(b.a)(h.a.mark((function e(){var t,c,a,s,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.ref("avatar/".concat((new Date).getTime()," ").concat(n.name)),e.prev=1,!i.avatarpath){e.next=7;break}return c=m.ref(),a=c.child("".concat(i.avtarpath)),e.next=7,a.delete();case 7:return e.next=9,t.put(n);case 9:return s=e.sent,e.next=12,t.getDownloadURL();case 12:return o=e.sent,e.next=15,f.collection("users").doc(p.currentUser.uid).update({avatar:o,avatarpath:s.ref.fullPath});case 15:r(""),console.log(o),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(){return e.apply(this,arguments)}}();e()}}),[n]),Object(w.jsx)("section",{children:i?Object(w.jsxs)("div",{className:"profile_container",children:[Object(w.jsxs)("div",{className:"img_container",children:[Object(w.jsx)("img",{src:i.avatar||A,alt:"avtar"}),Object(w.jsxs)("div",{className:"overlay",children:[Object(w.jsx)("label",{htmlFor:"photo",children:Object(w.jsx)(P,{})}),i.avatar?Object(w.jsx)(q,{deleteimg:u}):null,Object(w.jsx)("input",{type:"file",accept:"image/*",style:{display:"none"},id:"photo",onChange:function(e){r(e.target.files[0]),console.log(n)}})]})]}),Object(w.jsxs)("div",{className:"text_container",children:[Object(w.jsx)("h3",{children:i.name}),Object(w.jsx)("p",{children:i.email}),Object(w.jsx)("hr",{}),Object(w.jsxs)("small",{children:["Joined on : ",i.createdAt]})]})]}):Object(w.jsx)("div",{children:"Loading..."})})},I=function(){return Object(w.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexFlow:"row",width:"100vw",height:"100vh",background:"white",color:"black"},children:[Object(w.jsx)("h1",{children:"Page not found!"}),Object(w.jsx)("p",{children:"404 Error"})]})},J=["component"];var Q=function(){var e=Object(c.useState)(null),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),s=Object(l.a)(a,2),d=s[0],h=s[1],b=p.currentUser,x=function(e){var t=e.component,n=Object(o.a)(e,J);return Object(w.jsx)(w.Fragment,{children:d?Object(w.jsx)(u.b,Object(i.a)(Object(i.a)({},n),{},{exact:!0,render:function(e){return b?Object(w.jsx)(t,Object(i.a)({},e)):Object(w.jsx)(u.a,{to:"/login"})}})):Object(w.jsx)("div",{children:"Loading"})})};return Object(c.useEffect)((function(){p.onAuthStateChanged((function(e){r(e),h(!0)}))}),[n]),Object(w.jsxs)(j.a,{children:[Object(w.jsx)(S,{}),Object(w.jsxs)(u.d,{children:[Object(w.jsx)(u.b,{exact:!0,path:"/signup",component:D}),Object(w.jsx)(u.b,{exact:!0,path:"/login",component:U}),Object(w.jsx)(u.b,{exact:!0,path:"/profile",component:F}),Object(w.jsx)(x,{exact:!0,path:"/React-firebase-chatapp",component:y}),Object(w.jsx)(x,{exact:!0,path:"/",component:y}),Object(w.jsx)(u.b,{component:I})]})]})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(Q,{})}),document.getElementById("root")),G()}},[[55,1,2]]]);
//# sourceMappingURL=main.3ab1c330.chunk.js.map